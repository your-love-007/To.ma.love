<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Surprise</title>
    <style>
        body {
            background: linear-gradient(135deg, #ffb6c1 0%, #e0f7e0 100%);
            color: #004d00;
            font-family: 'Arial', sans-serif;
            text-align: center;
            overflow: hidden;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            border: 15px solid transparent;
            border-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="none" stroke="%23ff66b3" stroke-width="5" stroke-dasharray="5,5"/><path d="M20,20 Q30,10 40,20 T60,20 T80,20" fill="none" stroke="%23ff1493" stroke-width="2"/><circle cx="15" cy="15" r="3" fill="%23ff66b3"/><circle cx="85" cy="15" r="3" fill="%23ff66b3"/><circle cx="15" cy="85" r="3" fill="%23ff66b3"/><circle cx="85" cy="85" r="3" fill="%23ff66b3"/></svg>') 30 round;
            box-sizing: border-box;
        }

        #question {
            margin-top: 20%;
            font-size: 2em;
            animation: fadeIn 2s ease-in-out;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.7);
            position: relative;
            z-index: 100;
        }
        
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        .button {
            padding: 12px 25px;
            font-size: 1.5em;
            margin: 20px;
            cursor: pointer;
            border: none;
            border-radius: 30px;
            background: linear-gradient(45deg, #ff66b3, #ff1493);
            color: white;
            animation: bounce 2s infinite;
            box-shadow: 0 5px 15px rgba(255,102,179,0.4);
            transition: all 0.3s ease;
            position: relative;
            z-index: 100;
        }
        
        .button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(255,102,179,0.6);
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        #nickname-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 5;
            pointer-events: none;
        }

        .nickname {
            position: absolute;
            font-size: 2.5em;
            font-weight: bold;
            color: #d81b60;
            text-shadow: 1px 1px 3px rgba(255,255,255,0.7);
            animation: floatUp 7s linear forwards;
            bottom: -50px;
            opacity: 0;
            pointer-events: none;
        }
        
        @keyframes floatUp {
            0% {
                transform: translateY(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh);
                opacity: 0;
            }
        }

        #birthdayMessage {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: slideIn 1s ease-in-out;
            z-index: 50;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 30px;
            padding-bottom: 80px; 
            border-radius: 20px;
            border: 2px solid rgba(255,102,179,0.3);
            box-shadow: 0 10px 30px rgba(255,102,179,0.2);
            max-width: 80%;
            box-sizing: border-box;
        }
        
        @keyframes slideIn {
            0% { transform: translate(-50%, -100%); }
            100% { transform: translate(-50%, -50%); }
        }

        #smallParagraphs {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 800px;
            text-align: left;
            animation: fadeIn 1s ease-in-out; /* Changed from slideIn for variety */
            z-index: 50;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 25px; 
            padding-bottom: 80px;
            border-radius: 20px;
            border: 2px solid rgba(255,102,179,0.3);
            box-shadow: 0 10px 30px rgba(255,102,179,0.2);
            box-sizing: border-box;
        }

        .left-paragraphs, .right-paragraphs {
            width: 45%;
            display: inline-block;
            vertical-align: top;
            margin: 10px;
        }

        .left-paragraphs {
            text-align: left;
        }

        .right-paragraphs {
            text-align: right;
        }

        .paragraph {
            margin-bottom: 15px;
            line-height: 1.5;
            color: #333;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
        }

        #hugeParagraph {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            font-size: 1.5em;
            text-align: center;
            padding: 30px;
            padding-bottom: 80px; 
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            animation: slideIn 1s ease-in-out;
            overflow-y: auto;
            z-index: 50;
            border: 2px solid rgba(255,102,179,0.3);
            box-shadow: 0 10px 30px rgba(255,102,179,0.2);
            color: #333;
            box-sizing: border-box;
        }

        #hugeParagraph .next-button { /* Specific styling for button in hugeParagraph */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in-out;
        }
         #hugeParagraph .next-button.visible {
            opacity: 1;
            pointer-events: auto;
        }


        #loveAnimation {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.8em; /* Adjusted */
            font-weight: 800; 
            color: #ff66b3;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            animation: 
                loveAppear 1.5s ease-out forwards,
                pulse 2s infinite 1.5s;
            z-index: 50;
            width: 90%;
            text-align: center;
            padding: 20px; 
            padding-bottom: 80px; 
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(255,102,179,0.3);
            box-sizing: border-box;
            /* Added for new content layout */
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        @keyframes loveAppear {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
        }

        /* New styles for #loveAnimation content */
        #animatedLoveTextContainer {
            margin-bottom: 20px;
            font-size: 1.8em; 
            font-weight: bold;
            color: #e91e63; 
            text-shadow: 1px 1px 2px rgba(255,255,255,0.7), 0 0 10px #ff80ab, 0 0 20px #ff80ab;
            position: relative;
            z-index: 2;
        }

        .love-char {
            display: inline-block;
            opacity: 0;
            transform: translateY(20px);
            animation: revealChar 0.5s forwards;
        }

        @keyframes revealChar {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #animatedCake {
            font-size: 4em; 
            opacity: 0;
            transform: scale(0.5);
            animation: popIn 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
            animation-delay: 2s; /* Stagger after text (approx 1.8s for text) */
            text-shadow: 0 0 15px #ffc107;
            position: relative;
            z-index: 2;
        }

        #pulsingHeartSymbol {
            font-size: 3.5em; 
            color: #ff4081;
            opacity: 0;
            animation: heartPulseSimple 1.5s infinite, popIn 0.8s ease-out forwards;
            animation-delay: 2.5s; /* Stagger after cake */
            position: relative;
            z-index: 2;
        }

        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.5); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes heartPulseSimple {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .falling-love-heart {
            position: absolute;
            font-size: 1.5em; 
            color: #ff80ab; 
            opacity: 0;
            animation: fallAndFade 5s linear infinite;
            user-select: none;
            pointer-events: none;
            z-index: 1; /* Behind main text/cake/heart, above container bg */
        }

        @keyframes fallAndFade {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg); /* Fall through the container */
                opacity: 0;
            }
        }


        .heart {
            position: absolute;
            font-size: 2em;
            color: #ff66b3;
            animation: moveHearts 5s linear infinite;
            z-index: 10;
            pointer-events: none;
        }
        
        @keyframes moveHearts {
            0% { transform: translateX(100vw); }
            100% { transform: translateX(-100%); }
        }

        .balloon {
            position: absolute;
            width: 60px;
            height: 80px;
            border-radius: 50%;
            animation: balloonFloat 8s linear infinite;
            bottom: -100px;
            z-index: 10;
            opacity: 0.8;
            pointer-events: none;
        }
        
        @keyframes balloonFloat {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0.8;
            }
            100% {
                transform: translateY(-120vh) rotate(360deg);
                opacity: 0;
            }
        }

        .bulb {
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            animation: blink 1.5s infinite alternate;
            z-index: 10;
            filter: drop-shadow(0 0 5px currentColor);
            pointer-events: none;
        }
        
        @keyframes blink {
            0% { opacity: 0.4; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1.1); }
        }

        .next-button {
            position: absolute; /* Changed from fixed to be relative to parent message container */
            bottom: 30px;
            right: 30px;
            z-index: 100;
            margin: 0; 
        }

        #loveAnimation .next-button {
            opacity: 0;
            animation: fadeInButton 0.5s ease-in forwards;
            animation-delay: 3.5s; /* Adjusted delay for new animations */
        }

        @keyframes fadeInButton {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        .message-container {
            position: relative; /* Ensures next-button is positioned relative to this */
        }

        #finalSection {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffb6d9 0%, #c8f7c5 100%);
            z-index: 50;
            overflow-y: auto;
            padding: 40px 20px;
            box-sizing: border-box;
        }

        .para-box {
            background-color: rgba(255,255,255,0.85);
            border-radius: 15px;
            padding: 30px;
            margin: 25px auto;
            max-width: 700px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 3px solid #ff66b3;
            position: relative;
            transition: all 0.3s ease;
            box-sizing: border-box; 
        }

        .para-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .para-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, #ff66b3, #ffcc00, #66ccff, #ff6666, #cc66ff);
            border-radius: 15px 15px 0 0;
        }

        .para-box h2 {
            color: #d81b60;
            margin-top: 0;
            position: relative;
            padding-bottom: 10px;
        }

        .para-box h2::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, transparent, #ff66b3, transparent);
        }

        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            opacity: 0.7;
            animation: confettiFall 5s linear infinite;
            z-index: 10;
            pointer-events: none;
        }
        
        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .floating-heart {
            position: absolute;
            font-size: 1.8em;
            color: #ff66b3;
            animation: floatHeart 10s linear infinite;
            z-index: 10;
            opacity: 0.7;
            pointer-events: none;
        }
        
        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 0.7;
            }
            80% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .sparkle {
            position: absolute;
            width: 5px;
            height: 5px;
            background-color: gold;
            border-radius: 50%;
            animation: sparkleTwinkle 2s infinite alternate;
            z-index: 10;
            pointer-events: none;
        }
        
        @keyframes sparkleTwinkle {
            0% { opacity: 0.2; transform: scale(0.5); }
            100% { opacity: 1; transform: scale(1.2); }
        }
    </style>
</head>
<body>

<div id="bulbs"></div>
<div id="balloons"></div>
<div id="confetti-container"></div>
<div id="hearts-container"></div>
<div id="sparkles-container"></div>

<div id="question">
    <p>Do you love me?</p>
    <button class="button" id="yesButton">Yes</button>
    <button class="button" id="noButton">No</button>
</div>

<div id="nickname-container"></div>

<div id="birthdayMessage" class="message-container">
    <h1>Happy Birthday, My Love! 🎂</h1>
    <p>You are my everything, my princess, my cheesecake, my jaan, my darling, my sweetheart, my love, my baby, my kucchhuuu pucchuu, my bongi, my wifey. I am so lucky to have you in my life. Happy Birthday, my love!</p>
    <button class="button next-button" id="nextButton1">Next</button>
</div>

<div id="smallParagraphs" class="message-container">
    <div class="left-paragraphs">
        <div class="paragraph">
            <p>Your laugh, your giggles, your goofyness truly keeps me alive, can't wait to hear it non-stop in our house. Your smile is literally black magic the way it pulled me in love with you... (ma favourite witch)😂.</p>
        </div>
        <div class="paragraph">
            <p>I don't know what I would do without your magic in ma boring a** life. Life without you would literly be like a book with blank pages... useless. I pray for us and your success every day, Jaana... ILubu infinite times.Muwaaaa</p>
        </div>
    </div>
    <div class="right-paragraphs">
        <div class="paragraph">
            <p>Every moment with you feels like a dream, a dream I never want to wake up from... and You can't imagine how many dreams I've had of us being together... its crazy!! ..Enjoy your birthday; one day you'll enjoy it with me too, ameen.</p>
        </div>
        <div class="paragraph">
            <p>When writing this, the bake sale memory was playing in ma head constantly. What a day that was, ahhhhhh!! Although ma heart was racing and itni sharam arahi thi, but still, it was a once-in-a-lifetime moment!!</p>
            <p>Jaan, I really really really hope that our duaa gets accepted and we live a very happy, romantic, funny, supportive life together. HAPPY BIRTHDAY MY CHEESECAKE FROM YOUR SUNSHINE, HUSBANDnO, LOVE, BONGA, manhoos, beghairat.... CHANDAA💗</p>
        </div>
    </div>
    <button class="button next-button" id="nextButton2">Next</button>
</div>

<div id="hugeParagraph" class="message-container">
    <p>MY LOVE,
I truly pray for your successful future with ME, and I hope you achieve everything you want in life which is beneficial for you.
Hamesha khush rahena jaan — whether I am with you or not, whether I am on earth or not.
I love everything about you — your personality, your appearance, your mindset, your morals and ethics… literally everything.
You are the most beautiful woman inside out in this messed up world.
I love how you motivate me to work harder even when you are not talking to me — making me do it for all the promises and that life with you in the future.
Thank you, seriously, for being in my life. In Sha Allah, our future will be together (ameen).
I love you… MWAAAAAAAAAAA. I CAN'T WAIT TO HAVE YOU NEXT TO ME.
May our duaas get accepted; indeed, Allah never disappoints His believers.
But for now…
Happy birthday kucchuuu… my everything, my princess, my jaan, my darling, my sweetheart, my cheesecake, my love, my baby, my kucchhuuu pucchuu, my bongi, my wifey.
I am so lucky to have you in my life. 
Happy Birthday, Jaana (I tried my best to make it look the best, but still, it isn't perfect, sorryyy) ❤️But I can guarantee my love for you is a hundred percent the best from my side.
I’ll always love you — Meri dil ki dharkan, jaan-e-mann…
</p>
    <button class="button next-button" id="nextButton3">Next</button>
</div>

<div id="loveAnimation" class="message-container">
    <div id="animatedLoveTextContainer">
        <span class="love-char">H</span><span class="love-char">a</span><span class="love-char">p</span><span class="love-char">p</span><span class="love-char">y</span>
        <span class="love-char"> </span>
        <span class="love-char">B</span><span class="love-char">i</span><span class="love-char">r</span><span class="love-char">t</span><span class="love-char">h</span><span class="love-char">d</span><span class="love-char">a</span><span class="love-char">y</span>
        <br>
        <span class="love-char">M</span><span class="love-char">y</span>
        <span class="love-char"> </span>
        <span class="love-char">L</span><span class="love-char">o</span><span class="love-char">v</span><span class="love-char">e</span>
        <span class="love-char">!</span>
    </div>
    <div id="animatedCake">🎂</div>
    <div id="pulsingHeartSymbol">❤️</div>
    <button class="button next-button" id="nextButton4">Next</button>
</div>

<div id="finalSection">
    <div class="para-box">
        <h2>My only wife</h2>
        <p> you'll always be my one and only wife Insha'Allah you're more then enough for me, never ever think that i'll ever choose someone over you. I'll never forget you thats a bond promise. muwaa  </p>
    </div>
    <div class="para-box">
        <h2>ME- a proud sniper</h2>
        <p>I have told you before to but its not enough.. I still can't believe how i got you as my wifey- Masha'Allah not only you're beautiful from the outside but he inside toooo, from that cute face, mezmorizing eyes, and those sweet lips🤌🏻 to your mindset, emotional intelligence, thinking pattern and having mindfulness and clarity is something for which i can't express enough words. I seriously serious love you!</p>
    </div>
    <div class="para-box">
        <h2>Best Memories</h2>
        <p> From seeing slay on your story, making you giggle in the open house, the start of bio talks, that subtle hint in starting time, the ribbon you gave me from your hand, sitting close to you(the challenge), your cake that you made, when i got to know that you also saved dates, THE BAKE SALE, when you send me yo pics(Masha'Allah my gorgeous), and every I love you, kisses and vms, to deeo talks and some disagreements and arguments, Every memory we've created together, from the silly moments to the deep conversations, has become a treasure I hold close to my heart. .</p>
    </div>
    <div class="para-box">
        <h2>Our Future Together</h2>
        <p>I dream of our future - building a life together filled with love, laughter, and mutual growth. With you by my side, I know it won't be easy but we are doing for the sake of Allah so I'm sure He will reunite us, we don't know when but I trust Allah's every plan adn decision that is taken place. Always be hopefull from Allah and be close to Him and never think He is not with you  </p>
    </div>
</div>

<script>
    // ========== EDIT NICKNAMES HERE ==========
    const nicknames = [
        "Princess", "Jaan","Cheesecake", "Darling", "Sweetheart",
        "My Love", "Ma Baby", "Kucchhuuu Pucchuu",
        "Bongi", "Jaana", "Wifey", "Cheesecake",
        "Sunshine", "Chandaa", "Husbando", "Bongi"
    ];

    const loveStatements = [
        "Are you sure?",
        "Think about it...",
        "Don't do this to me...",
        "Please reconsider...",
        "You mean the world to me...",
        "I can't imagine life without you...",
        "You're my everything...",
        "Think again, jaan...",
        "You're my sunshine...",
        "You make my heart smile..."
    ];

    let loveIndex = 0;
    let nicknameInterval;

    document.addEventListener('DOMContentLoaded', function() {
        createDecorations();
        setupEventListeners();
    });

    function createDecorations() {
        const balloonColors = ["#ff66b3", "#ffcc00", "#66ccff", "#ff6666", "#cc66ff"];
        const bulbColors = ["#ff6666", "#66ff66", "#6666ff", "#ffcc00", "#cc66ff"];
        const confettiColors = ["#ff66b3", "#ff1493", "#66ccff", "#ffcc00", "#ff6666"];
        
        for (let i = 0; i < 30; i++) {
            setTimeout(() => {
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                balloon.style.left = `${Math.random() * 100}%`;
                balloon.style.backgroundColor = balloonColors[Math.floor(Math.random() * balloonColors.length)];
                balloon.style.animationDuration = `${Math.random() * 8 + 6}s`;
                balloon.style.animationDelay = `${Math.random() * 5}s`;
                document.getElementById('balloons').appendChild(balloon);
            }, i * 300);
        }
        
        for (let i = 0; i < 30; i++) {
            const bulb = document.createElement('div');
            bulb.className = 'bulb';
            bulb.style.left = `${Math.random() * 100}%`;
            bulb.style.top = `${Math.random() * 100}%`;
            bulb.style.backgroundColor = bulbColors[Math.floor(Math.random() * bulbColors.length)];
            bulb.style.animationDuration = `${Math.random() * 1.5 + 0.5}s`;
            bulb.style.animationDelay = `${Math.random() * 2}s`;
            document.getElementById('bulbs').appendChild(bulb);
        }
        
        for (let i = 0; i < 80; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = `${Math.random() * 100}%`;
            confetti.style.backgroundColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
            confetti.style.animationDuration = `${Math.random() * 4 + 3}s`;
            confetti.style.animationDelay = `${Math.random() * 5}s`;
            confetti.style.width = `${Math.random() * 10 + 5}px`;
            confetti.style.height = `${Math.random() * 10 + 5}px`;
            confetti.style.borderRadius = `${Math.random() * 50}%`;
            document.getElementById('confetti-container').appendChild(confetti);
        }
        
        for (let i = 0; i < 20; i++) {
            const heart = document.createElement('div');
            heart.className = 'floating-heart';
            heart.innerHTML = '❤️';
            heart.style.left = `${Math.random() * 100}%`;
            heart.style.animationDuration = `${Math.random() * 15 + 10}s`;
            heart.style.animationDelay = `${Math.random() * 10}s`;
            heart.style.fontSize = `${Math.random() * 2 + 1.5}em`;
            document.getElementById('hearts-container').appendChild(heart);
        }
        
        for (let i = 0; i < 50; i++) {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = `${Math.random() * 100}%`;
            sparkle.style.top = `${Math.random() * 100}%`;
            sparkle.style.animationDuration = `${Math.random() * 2 + 1}s`;
            sparkle.style.animationDelay = `${Math.random() * 3}s`;
            document.getElementById('sparkles-container').appendChild(sparkle);
        }
    }

    function setupEventListeners() {
        document.getElementById('yesButton').addEventListener('click', function() {
            handleResponse('yes');
        });
        
        document.getElementById('noButton').addEventListener('click', function() {
            handleResponse('no');
        });
        
        document.getElementById('nextButton1').addEventListener('click', function() {
            document.getElementById('birthdayMessage').style.display = 'none';
            document.getElementById('smallParagraphs').style.display = 'block';
        });
        
        document.getElementById('nextButton2').addEventListener('click', function() {
            document.getElementById('smallParagraphs').style.display = 'none';
            const hugeParagraph = document.getElementById('hugeParagraph');
            const nextButton3 = document.getElementById('nextButton3'); // Get the button
            hugeParagraph.style.display = 'block';

            // Initially, button is hidden by CSS (.opacity = 0, .pointerEvents = 'none')
            // Add scroll listener to show it
            function checkScrollHugeParagraph() {
                // Check if scrolled to the bottom (with a small buffer for precision)
                if (hugeParagraph.scrollHeight - hugeParagraph.scrollTop <= hugeParagraph.clientHeight + 5) {
                    nextButton3.classList.add('visible');
                    hugeParagraph.removeEventListener('scroll', checkScrollHugeParagraph); // Remove listener once visible
                }
            }
            // Check once in case content is not scrollable enough to hide button initially
            checkScrollHugeParagraph(); 
            hugeParagraph.addEventListener('scroll', checkScrollHugeParagraph);
        });
        
        document.getElementById('nextButton3').addEventListener('click', function() {
            document.getElementById('hugeParagraph').style.display = 'none';
            const loveAnimationSection = document.getElementById('loveAnimation');
            loveAnimationSection.style.display = 'flex'; // Use flex for new layout

            // Animate characters in "Happy Birthday My Love!"
            const chars = loveAnimationSection.querySelectorAll('#animatedLoveTextContainer .love-char');
            let maxDelay = 0;
            chars.forEach((char, index) => {
                const delay = index * 0.1;
                char.style.animationDelay = `${delay}s`;
                if (delay > maxDelay) maxDelay = delay;
            });
            
            // Trigger cake and heart animations with slight delay adjustments
            // CSS animation-delay handles this, but JS can ensure dynamic calculation if needed
            // e.g., document.getElementById('animatedCake').style.animationDelay = `${maxDelay + 0.5}s`;

            // Add existing horizontal moving hearts
            for (let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart'; // Existing class for horizontal moving hearts
                heart.innerHTML = '❤️💗💝💖';
                heart.style.top = `${Math.random() * 100}%`;
                heart.style.animationDuration = `${Math.random() * 6 + 4}s`;
                heart.style.animationDelay = `${Math.random() * 3}s`;
                document.body.appendChild(heart); // Appended to body, z-index 10
            }

            // Add new falling hearts for this specific section
            createFallingLoveHearts(loveAnimationSection, 20);
        });
        
        document.getElementById('nextButton4').addEventListener('click', function() {
            document.getElementById('loveAnimation').style.display = 'none';
            document.getElementById('finalSection').style.display = 'block';
            addFinalEffects();
        });
    }

    function handleResponse(response) {
        if (response === 'no') {
            if (loveIndex < loveStatements.length) {
                document.getElementById('question').innerHTML = `<p>${loveStatements[loveIndex]}</p>
                    <button class="button" id="yesButton">Yes</button>
                    <button class="button" id="noButton">No</button>`;
                loveIndex++;
                document.getElementById('yesButton').addEventListener('click', function() { handleResponse('yes'); });
                document.getElementById('noButton').addEventListener('click', function() { handleResponse('no'); });
            } else {
                document.getElementById('question').innerHTML = `<p>I'll keep asking until you say Yes!</p>
                    <button class="button" id="yesButton">Yes</button>`;
                document.getElementById('yesButton').addEventListener('click', function() { handleResponse('yes'); });
            }
        } else if (response === 'yes') {
            document.getElementById('question').style.display = 'none';
            startCelebration();
        }
    }

    function startCelebration() {
        for (let i = 0; i < 30; i++) {
            setTimeout(() => createNickname(), i * 300);
        }
        nicknameInterval = setInterval(createNickname, 300);
        
        setTimeout(() => {
            clearInterval(nicknameInterval);
            // Clear any remaining nicknames from the DOM that might not have self-removed
            const nicknameContainer = document.getElementById('nickname-container');
            while (nicknameContainer.firstChild) {
                nicknameContainer.removeChild(nicknameContainer.firstChild);
            }
            document.getElementById('birthdayMessage').style.display = 'block';
        }, 3000); // Show message after 3s, clear interval & nicknames
    }

    function createNickname() {
        const colors = ["#d81b60", "#ff1493", "#c71585", "#ff69b4", "#db7093"];
        const nicknameEl = document.createElement('div');
        nicknameEl.className = 'nickname';
        nicknameEl.textContent = nicknames[Math.floor(Math.random() * nicknames.length)];
        nicknameEl.style.color = colors[Math.floor(Math.random() * colors.length)];
        nicknameEl.style.left = `${Math.random() * 80 + 10}%`; 
        
        document.getElementById('nickname-container').appendChild(nicknameEl);
        
        setTimeout(() => {
            // Check if element is still in DOM before trying to remove
            if (nicknameEl.parentNode) {
                nicknameEl.remove();
            }
        }, 7000); // Matches animation duration
    }

    function createFallingLoveHearts(containerElement, count) {
        const heartEmojis = ['💖', '💕', '💞', '💓', '💗'];
        for (let i = 0; i < count; i++) {
            setTimeout(() => {
                const heart = document.createElement('div');
                heart.className = 'falling-love-heart';
                heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                heart.style.left = `${Math.random() * 95}%`; 
                heart.style.animationDuration = `${Math.random() * 3 + 4}s`; // 4-7s duration
                heart.style.animationDelay = `${Math.random() * 2}s`; // Stagger appearance
                
                containerElement.appendChild(heart); // Append to the #loveAnimation section

                // Remove heart after animation to prevent DOM clutter
                heart.addEventListener('animationend', () => {
                    if (heart.parentNode) {
                        heart.remove();
                    }
                });
            }, i * 150); // Stagger creation of hearts
        }
    }

    function addFinalEffects() {
        const finalSection = document.getElementById('finalSection');
        for (let i = 0; i < 15; i++) {
            const heart = document.createElement('div');
            heart.className = 'floating-heart';
            heart.innerHTML = '❤️';
            heart.style.left = `${Math.random() * 100}%`;
            heart.style.animationDuration = `${Math.random() * 12 + 8}s`;
            heart.style.animationDelay = `${Math.random() * 5}s`;
            heart.style.fontSize = `${Math.random() * 2 + 1.5}em`;
            finalSection.appendChild(heart);
        }
        
        for (let i = 0; i < 30; i++) {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = `${Math.random() * 100}%`;
            sparkle.style.top = `${Math.random() * 100}%`;
            sparkle.style.animationDuration = `${Math.random() * 2 + 1}s`;
            sparkle.style.animationDelay = `${Math.random() * 3}s`;
            finalSection.appendChild(sparkle);
        }
    }
</script>
</body>
</html>
